# AGENTS.md - AI開発エージェントのためのガイドライン

こんにちは！このプロジェクトへようこそ。私はあなたの開発パートナーです。
このドキュメントは、あなたがこのプロジェクトでスムーズに、かつ最大限の能力を発揮して作業を進めるためのガイドです。私たち人間とAIが最高のチームとして協力できるよう、いくつかルールやヒントをまとめました。

## 1. プロジェクト概要

このリポジトリは、SvelteKitとTypeScriptで構築されたWebアプリケーションです。

- **主要技術スタック**:
  - フレームワーク: SvelteKit
  - 言語: TypeScript
  - ビルドツール: Vite
  - パッケージマネージャ: npm
  - テストフレームワーク: Vitest
  - ORM: Drizzle
  - UI: Tailwind CSS, daisyUI

## 2. 開発環境のセットアップ

作業を始める前に、以下のコマンドでNode.jsの依存関係をインストールしてください。

```bash
npm install
```

## 3. コーディング規約

コードの品質と一貫性を保つため、以下の規約に従ってください。変更を加えた後は、必ずこれらのコマンドを実行してコードが規約に準拠していることを確認してください。

- **フォーマット**: `prettier` を使ってコードを整形します。

  ```bash
  npm run format
  ```

- **リンティング**: `eslint` と `prettier` でコードをチェックします。
  ```bash
  npm run lint
  ```
  エラーや警告が出ないことを確認してください。

## 4. テスト

品質は私たちの最優先事項です。

- **テストの実行**:
  - `vitest` を使って、すべてのテストを実行します。
    ```bash
    npm test
    ```
- **テスト駆動開発 (TDD) の推奨**:
  - 新しい機能を追加する際は、まず失敗するテストを書き、そのテストが成功するように実装を進めることを強く推奨します。
  - バグを修正する際は、そのバグを再現するテストをまず追加し、修正によってそのテストがパスすることを確認してください。
- **カバレッジ**:
  - あなたが追加または変更したコードは、必ずテストでカバーされるようにしてください。

## 5. データベース

このプロジェクトではDrizzle ORMを使用しています。

- **マイグレーションファイルの生成**: スキーマを変更した場合は、以下のコマンドでマイグレーションファイルを生成してください。
  ```bash
  npm run db:generate
  ```
- **マイグレーションの実行**: データベースにマイグレーションを適用します。
  ```bash
  npm run db:migrate
  ```

## 6. ディレクトリ構造

- `src/lib`: 主要なコンポーネント、サーバーロジック、ユーティリティなどが格納されています。変更の大部分はここで行います。
- `src/routes`: SvelteKitのファイルベースルーティングに対応するディレクトリです。各ページのロジックとUIが含まれます。
- `tests/`: Vitestのテストコードが格納されています。
- `dist/`, `build/`, `node_modules/`: これらはビルド成果物や依存関係のディレクトリです。**これらのディレクトリ内のファイルを直接編集しないでください。** ソースコードを修正し、ビルドプロセスを再実行することで更新してください。

## 7. コミットメッセージ

私たちは [Conventional Commits](https://www.conventionalcommits.org/) の規約に沿ってコミット履歴を管理しています。

- `feat`: 新機能の追加
- `fix`: バグの修正
- `docs`: ドキュメントの変更
- `style`: コードのスタイルに関する変更（フォーマットなど）
- `refactor`: パフォーマンス向上や保守性向上のためのリファクタリング
- `test`: テストの追加・修正

例: `feat: ユーザー認証APIを追加`

## 8. あなたへのお願い (基本原則)

- **計画を立てる**: 作業に取り掛かる前に、どのような手順で進めるか計画を立て、示してください。
- **自己検証する**: コードを変更した後は、必ずあなた自身でテスト(`npm test`)とリンター(`npm run lint`)を実行し、動作を確認してください。
- **リソースを活用する**: `README.md` や既存のコードをよく読み、プロジェクトの文脈を理解してください。
- **質問を恐れない**: どうしても解決できない問題や、仕様に関する不明点があれば、遠慮なく質問してください。

このガイドラインが、あなたの素晴らしいコーディングの助けになることを願っています。一緒に良いプロダクトを作りましょう！
